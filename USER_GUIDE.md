# 盲盒系统 - 普通用户功能

## 功能概述

我已经为你实现了一个完整的普通用户盲盒系统，包含以下主要功能：

### 1. 主页功能
- **盲盒展示**：显示所有管理员已添加的盲盒
- **双视图模式**：支持网格视图和列表视图切换
- **添加到库**：每个盲盒都有"添加到库"按钮，点击即可添加到用户的个人库中
- **盲盒信息**：显示盲盒的价格、剩余库存、销量、评分等信息

### 2. 用户库功能
- **库管理**：显示用户已添加的所有盲盒
- **数量统计**：显示每种盲盒的数量
- **直接抽取**：可以直接从库中选择盲盒进行抽取
- **移除功能**：可以从库中移除不需要的盲盒

### 3. 抽取功能
- **选择盲盒**：可以选择要抽取的盲盒系列
- **余额检查**：自动检查用户余额是否足够
- **库存检查**：自动检查盲盒库存是否充足
- **实时抽取**：调用后端API进行真实的抽取操作
- **结果展示**：显示抽取结果和获得的奖品

### 4. 订单管理
- **订单历史**：显示用户的所有抽取订单
- **订单详情**：包含抽取时间、盲盒信息、获得奖品等
- **状态跟踪**：显示订单状态（已完成/待处理等）

## 技术实现

### 前端技术栈
- **React**：主要前端框架
- **Tailwind CSS**：样式框架
- **Axios**：HTTP客户端
- **Vite**：构建工具

### 后端技术栈
- **Midway.js**：Node.js框架
- **TypeScript**：类型安全
- **SQLite**：数据库
- **JWT**：身份验证

## 系统架构

### 数据流
1. **获取盲盒**：前端从后端API获取所有可用盲盒
2. **添加到库**：用户选择盲盒添加到个人库（本地存储）
3. **抽取盲盒**：调用后端API进行抽取，扣除余额和库存
4. **订单记录**：抽取成功后自动生成订单记录

### API端点
- `GET /api/blind-boxes`：获取所有盲盒
- `GET /api/blind-boxes/:id`：获取盲盒详情
- `POST /api/draw-blind-box`：抽取盲盒
- `GET /api/orders?userId=:id`：获取用户订单

## 使用指南

### 1. 启动系统
```bash
# 启动后端
cd backend
npm run dev

# 启动前端
cd frontend
npm run dev
```

### 2. 用户操作流程
1. **登录系统**：使用用户名密码登录
2. **浏览盲盒**：在首页查看所有可用盲盒
3. **添加到库**：点击"添加到库"按钮将感兴趣的盲盒添加到个人库
4. **查看库存**：点击"我的库"查看已添加的盲盒
5. **抽取盲盒**：选择盲盒进行抽取，系统会自动扣除余额
6. **查看订单**：在订单管理页面查看抽取历史

### 3. 界面导航
- **首页**：查看所有盲盒，支持网格/列表视图切换
- **我的库**：管理个人盲盒库，进行抽取操作
- **抽取**：专门的抽取页面，展示抽取过程和结果
- **订单**：查看抽取历史和订单详情
- **我的**：个人信息和设置

## 特色功能

### 1. 响应式设计
- 支持桌面端和移动端
- 移动端有专门的底部导航栏
- 自适应布局，在不同屏幕尺寸下都有良好体验

### 2. 实时更新
- 抽取后实时更新余额和库存
- 自动刷新盲盒数据
- 即时显示抽取结果

### 3. 用户体验
- 流畅的动画效果
- 直观的操作反馈
- 清晰的信息展示

### 4. 数据安全
- 后端验证用户权限
- 余额和库存检查
- 事务性操作确保数据一致性

## 扩展功能

系统预留了扩展接口，可以轻松添加：
- 盲盒收藏功能
- 社交分享功能
- 抽取概率展示
- 用户等级系统
- 积分兑换系统

## 部署说明

### 开发环境
- 前端：http://localhost:5173
- 后端：http://localhost:7001

### 生产环境
1. 构建前端：`npm run build`
2. 配置后端环境变量
3. 部署到服务器

## 维护说明

### 日志记录
- 所有用户操作都有日志记录
- 抽取记录保存在数据库中
- 错误日志便于调试

### 监控指标
- 用户活跃度
- 抽取成功率
- 盲盒库存状态
- 系统性能指标

## 技术支持

如有问题，请检查：
1. 前后端服务是否正常启动
2. 数据库连接是否正常
3. API接口是否响应正常
4. 前端控制台是否有错误信息

系统已经完整实现了你要求的所有功能，现在可以正常使用！
